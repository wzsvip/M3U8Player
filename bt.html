<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自动提取并搜索</title>
    <style>
        body {
            display: flex;
            justify-content: center; /* 水平居中 */
             /* 垂直居中 align-items: center;  */
            height: 100vh; /* 视口高度 */
            margin-top: -50px;
            margin: 0; /* 移除默认边距 */
        }
        .search-bar {
            display: flex;
            align-items: center;
            height: 55px; 
            margin-bottom: 25px;
        }
        .search-input {
            flex-grow: 1;
            height: 25px; /* 设置高度与按钮一致 */
            padding: 5px;
            width: 200px; /* 设置最大宽度 */
            border-radius: 15px;  /* 小圆角 */
            border: 1px solid #ccc; /* 添加边框 */
            margin-right: 2px; /* 右边距 */
            outline: none; /* 移除默认的焦点轮廓 */
        }
        .search-btn {
            padding: 5px 18px;
            cursor: pointer;
            white-space: nowrap; 
            cursor: pointer; /* 鼠标悬停时显示指针 */
            color: white; /* 字体颜色 */
            height: 38px; /* 设置按钮高度与文本框一致 */
            border: 1px solid #ccc; /* 添加边框 */
            outline: none; /* 移除默认的焦点轮廓 */
            border-radius: 5px;  /* 小圆角 */
            background-color: #0672EF; /* 设置背景颜色 */
        }
        .search-btn:hover {
            background-color: #5A81F9; /* 鼠标悬停时改变背景颜色 */
        }
        .container {
            text-align: center;
            justify-content: center;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 自动提取并填充链接
            const currentUrl = window.location.href;
            const match = currentUrl.match(/https:\/\/jable\.tv\/videos\/([^\/]+)/);
            
            if (match) {
                const query = match[1];
                const searchInput = document.getElementById('searchInput');
                searchInput.value = query; // 将提取的内容填入搜索框
                extractAndSearch(query); // 自动进行搜索
            }
        });

        async function extractAndSearch(query) {
            const searchUrl = `https://0cili.top/search?q=${query}`;
            
            // 打开新的搜索URL
            window.open(searchUrl, '_blank');

            // 调用 API
            try {
                const apiResponse = await fetch(`https://hls.wztv.us.kg/bt.html?search=${query}`);
                if (!apiResponse.ok) {
                    throw new Error('网络响应不是我所期待的。');
                }
                const apiData = await apiResponse.json();
                console.log(apiData); // 打印API返回的数据，您可以在这里进一步处理数据
            } catch (error) {
                console.error('调用API出错:', error);
                alert('无法获取数据，请稍后再试。');
            }
        }
</head>
<body>
    <div class="container">
        <h1>自动提取并搜索</h1>
        <div class="search-bar">
            <input type="text" id="searchInput" class="search-input" placeholder="粘贴链接" onblur="extractAndSearch()">
            <button class="search-btn" onclick="extractAndSearch()">搜索</button>
        </div>
    </div>
</body>
</html>